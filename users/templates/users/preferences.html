{% load static %}
{% load i18n %}
{% load admin_url %}
{% load mastodon %}
{% load oauth_token %}
{% load truncate %}
{% load thumb %}
<!DOCTYPE html>
<html lang="zh" class="classic-page">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ site_name }} - 设置</title>
    {% include "common_libs.html" with jquery=0 v2=1 %}
  </head>
  <body>
    {% include "_header.html" with current="data" %}
    <main>
      <div class="grid__main">
        <article>
          <form action="{% url 'users:preferences' %}" method="post">
            <section>
              <details>
                <summary>{% trans '使用偏好设置' %}</summary>
                {% csrf_token %}
                <span>{% trans '新标记默认可见性：' %}</span>
                <div>
                  <input type="radio"
                         name="default_visibility"
                         value="0"
                         required=""
                         id="id_visibility_0"
                         {% if request.user.preference.default_visibility == 0 %}checked{% endif %}>
                  <label for="id_visibility_0">公开</label>
                  <input type="radio"
                         name="default_visibility"
                         value="1"
                         required=""
                         id="id_visibility_1"
                         {% if request.user.preference.default_visibility == 1 %}checked{% endif %}>
                  <label for="id_visibility_1">仅关注者</label>
                  <input type="radio"
                         name="default_visibility"
                         value="2"
                         required=""
                         id="id_visibility_2"
                         {% if request.user.preference.default_visibility == 2 %}checked{% endif %}>
                  <label for="id_visibility_2">仅自己</label>
                </div>
                <br>
                <span>{% trans '登录后显示：' %}</span>
                <div>
                  <input type="radio"
                         name="classic_homepage"
                         value="0"
                         id="classic_homepage0"
                         {% if request.user.preference.classic_homepage == 0 %}checked{% endif %}>
                  <label for="classic_homepage0">内容发现</label>
                  <input type="radio"
                         name="classic_homepage"
                         value="2"
                         id="classic_homepage2"
                         {% if request.user.preference.classic_homepage == 2 %}checked{% endif %}>
                  <label for="classic_homepage2">好友动态</label>
                  <input type="radio"
                         name="classic_homepage"
                         value="1"
                         id="classic_homepage1"
                         {% if request.user.preference.classic_homepage == 1 %}checked{% endif %}>
                  <label for="classic_homepage1">个人主页</label>
                </div>
                <br style="margin-bottom:1.5em">
                <div>
                  <input type="checkbox"
                         name="no_anonymous_view"
                         id="no_anonymous_view"
                         {% if request.user.preference.no_anonymous_view %}checked{% endif %}>
                  <label for="no_anonymous_view">{% trans '不允许未登录用户访问你的个人主页' %}</label>
                </div>
                <br style="margin-bottom:1.5em">
                <div>
                  <input type="checkbox"
                         name="show_last_edit"
                         id="show_last_edit"
                         {% if request.user.preference.show_last_edit %}checked{% endif %}>
                  <label for="show_last_edit">{% trans '显示你是某条目的最近编辑者' %}</label>
                </div>
              </details>
            </section>
            <section>
              <details>
                <summary>{% trans '社交网络分享相关设置' %}</summary>
                <div>
                  <input type="checkbox"
                         name="mastodon_publish_public"
                         id="mastodon_publish_public"
                         {% if request.user.preference.mastodon_publish_public %}checked{% endif %}>
                  <label for="mastodon_publish_public">
                    以公开方式分享的帖文发布到<em data-tooltip="选中时为public，未选中时为unlisted">公共时间轴</em>
                  </label>
                </div>
                <br>
                <br>
                <span>{% trans '在联邦网络上分享帖文时在结尾附加标签：' %}</span>
                <div>
                  <input name="mastodon_append_tag"
                         id="tag"
                         placeholder="#我的书影音"
                         value="{{ request.user.preference.mastodon_append_tag }}">
                </div>
                <br>
                <div>
                  <input type="checkbox"
                         name="default_no_share"
                         id="default_no_share"
                         {% if request.user.preference.default_no_share %}checked{% endif %}>
                  <label for="default_no_share">标记时默认不分享到联邦网络</label>
                </div>
              </details>
            </section>
            <input type="submit" value="{% trans '保存' %}">
          </form>
        </article>
      </div>
      {% include "_sidebar.html" with show_profile=1 %}
    </main>
    {% include "partial/_footer.html" %}
  </body>
</html>
